<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>redis的基本使用 | Nigtunt</title><meta name="description" content="redis的基本使用"><meta name="keywords" content="redis,NoSql"><meta name="author" content="Nigtunt"><meta name="copyright" content="Nigtunt"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="redis的基本使用"><meta name="twitter:description" content="redis的基本使用"><meta name="twitter:image" content="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1593150327676&amp;di=8ef7dfd43f130358b5ecea1d9b96cca1&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201202%2F26%2F213356orhd1dob1wq9exbn.png"><meta property="og:type" content="article"><meta property="og:title" content="redis的基本使用"><meta property="og:url" content="https://nigtunt.github.io/2020/06/26/redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><meta property="og:site_name" content="Nigtunt"><meta property="og:description" content="redis的基本使用"><meta property="og:image" content="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1593150327676&amp;di=8ef7dfd43f130358b5ecea1d9b96cca1&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201202%2F26%2F213356orhd1dob1wq9exbn.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://nigtunt.github.io/2020/06/26/redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><link rel="prev" title="使用redis存在的问题" href="https://nigtunt.github.io/2020/06/26/%E4%BD%BF%E7%94%A8redis%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98/"><link rel="next" title="mysql各种面试问题总结" href="https://nigtunt.github.io/2020/06/05/mysql%E5%90%84%E7%A7%8D%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Nigtunt</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://yhaq.top/group1/M00/00/00/head.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">132</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">37</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#redis"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">redis</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#redis介绍"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">redis介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis安装"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">redis安装</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Redis配置"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">Redis配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#配置详解"><span class="toc_mobile_items-number">1.1.3.</span> <span class="toc_mobile_items-text">配置详解</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Redis关闭"><span class="toc_mobile_items-number">1.1.4.</span> <span class="toc_mobile_items-text">Redis关闭</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#redis常用命令"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">redis常用命令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#公用命令"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">公用命令</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#key的命名建议"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">key的命名建议</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#string"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">string</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#String应用场景："><span class="toc_mobile_items-number">1.2.4.</span> <span class="toc_mobile_items-text">String应用场景：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#hash"><span class="toc_mobile_items-number">1.2.5.</span> <span class="toc_mobile_items-text">hash</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#常用命令"><span class="toc_mobile_items-number">1.2.5.0.1.</span> <span class="toc_mobile_items-text">常用命令</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#list"><span class="toc_mobile_items-number">1.2.6.</span> <span class="toc_mobile_items-text">list</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#常用命令-1"><span class="toc_mobile_items-number">1.2.6.0.1.</span> <span class="toc_mobile_items-text">常用命令</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#补充："><span class="toc_mobile_items-number">1.2.7.</span> <span class="toc_mobile_items-text">补充：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#set"><span class="toc_mobile_items-number">1.2.8.</span> <span class="toc_mobile_items-text">set</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#zset"><span class="toc_mobile_items-number">1.2.9.</span> <span class="toc_mobile_items-text">zset</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#redis使用进阶"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">redis使用进阶</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis发布订阅"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">redis发布订阅</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis多数据库"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">redis多数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis事务"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">redis事务</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis-数据淘汰策略"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">redis 数据淘汰策略</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#redis持久化"><span class="toc_mobile_items-number">1.3.5.</span> <span class="toc_mobile_items-text">redis持久化</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#RDB"><span class="toc_mobile_items-number">1.3.5.1.</span> <span class="toc_mobile_items-text">RDB</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#AOF"><span class="toc_mobile_items-number">1.3.5.2.</span> <span class="toc_mobile_items-text">AOF</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#java连接redis"><span class="toc_mobile_items-number">1.3.6.</span> <span class="toc_mobile_items-text">java连接redis</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#redis"><span class="toc-number">1.</span> <span class="toc-text">redis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#redis介绍"><span class="toc-number">1.1.</span> <span class="toc-text">redis介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redis安装"><span class="toc-number">1.1.1.</span> <span class="toc-text">redis安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis配置"><span class="toc-number">1.1.2.</span> <span class="toc-text">Redis配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置详解"><span class="toc-number">1.1.3.</span> <span class="toc-text">配置详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis关闭"><span class="toc-number">1.1.4.</span> <span class="toc-text">Redis关闭</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis常用命令"><span class="toc-number">1.2.</span> <span class="toc-text">redis常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#公用命令"><span class="toc-number">1.2.1.</span> <span class="toc-text">公用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key的命名建议"><span class="toc-number">1.2.2.</span> <span class="toc-text">key的命名建议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-number">1.2.3.</span> <span class="toc-text">string</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String应用场景："><span class="toc-number">1.2.4.</span> <span class="toc-text">String应用场景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash"><span class="toc-number">1.2.5.</span> <span class="toc-text">hash</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#常用命令"><span class="toc-number">1.2.5.0.1.</span> <span class="toc-text">常用命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list"><span class="toc-number">1.2.6.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#常用命令-1"><span class="toc-number">1.2.6.0.1.</span> <span class="toc-text">常用命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#补充："><span class="toc-number">1.2.7.</span> <span class="toc-text">补充：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-number">1.2.8.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zset"><span class="toc-number">1.2.9.</span> <span class="toc-text">zset</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis使用进阶"><span class="toc-number">1.3.</span> <span class="toc-text">redis使用进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redis发布订阅"><span class="toc-number">1.3.1.</span> <span class="toc-text">redis发布订阅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis多数据库"><span class="toc-number">1.3.2.</span> <span class="toc-text">redis多数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis事务"><span class="toc-number">1.3.3.</span> <span class="toc-text">redis事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis-数据淘汰策略"><span class="toc-number">1.3.4.</span> <span class="toc-text">redis 数据淘汰策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis持久化"><span class="toc-number">1.3.5.</span> <span class="toc-text">redis持久化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RDB"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">RDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOF"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">AOF</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java连接redis"><span class="toc-number">1.3.6.</span> <span class="toc-text">java连接redis</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1593150327676&amp;di=8ef7dfd43f130358b5ecea1d9b96cca1&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201202%2F26%2F213356orhd1dob1wq9exbn.png)"><div id="post-info"><div id="post-title"><div class="posttitle">redis的基本使用</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-26<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-06-10</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/redis/">redis</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">5.4k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 18 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><h2 id="redis介绍"><a href="#redis介绍" class="headerlink" title="redis介绍"></a>redis介绍</h2><p>Redis 是完全开源免费的，遵守BSD协议，是一个高性能(NOSQL)的key-value数据库,Redis是一个开源的使用ANSI <a href="https://baike.baidu.com/item/C语言" target="_blank" rel="noopener">C语言</a>编写、支持网络、可基于内存亦可持久化的日志型、Key-Value<a href="https://baike.baidu.com/item/数据库" target="_blank" rel="noopener">数据库</a>，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。从2013年5月开始，Redis的开发由Pivotal赞助。(Vmware在资助着redis项目的开发和维护) </p>
<p><strong>NoSQL介绍</strong></p>
<p>NoSQL，泛指非关系型的数据库。随着互联网web2.0网站的兴起，传统的关系数据库在应付web2.0网站，特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心，暴露了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。<strong>NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，尤其是大数据应用难题</strong>。 </p>
<p><strong>NoSQL数据库的四大分类</strong> </p>
<p><strong>键值(</strong><a href="https://baike.baidu.com/item/Key-Value" target="_blank" rel="noopener"><em>Key-Value</em></a><strong>)存储数据库</strong>          </p>
<p>这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。Key/value模型对于IT系统来说的优势在于简单、易部署。但是如果DBA只对部分值进行查询或更新的时候，Key/value就显得效率低下了。[3]  举例如：Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle BDB. </p>
<p><strong>列存储数据库</strong>        </p>
<p>这部分数据库通常是用来应对分布式存储的海量数据。键仍然存在，但是它们的特点是指向了多个列。这些列是由列家族来安排的。如：Cassandra, HBase, Riak. </p>
<p><strong>文档型数据库</strong>       </p>
<p>文档型数据库的灵感是来自于Lotus Notes办公软件的，而且它同第一种键值存储相类似。该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如JSON。文档型数据库可 以看作是键值数据库的升级版，允许之间嵌套键值。而且文档型数据库比键值数据库的查询效率更高。如：CouchDB, MongoDb. 国内也有文档型数据库SequoiaDB，已经开源。 </p>
<p><strong>图形(Graph)数据库</strong>       </p>
<p>图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是使用灵活的图形模型，并且能够扩展到多个服务器上。NoSQL数据库没有标准的查询语言(SQL)，因此进行数据库查询需要制定数据模型。许多NoSQL数据库都有REST式的数据接口或者查询API。[2]  如：Neo4J, InfoGrid, Infinite Graph.       因此，我们总结NoSQL数据库在以下的这几种情况下比较适用：1、数据模型比较简单；2、需要灵活性更强的IT系统；3、对数据库性能要求较高；4、不需要高度的数据一致性；5、对于给定key，比较容易映射复杂值的环境。</p>
<p><strong>Redis 与其他 key - value 缓存产品有以下三个特点：</strong></p>
<ul>
<li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li>
<li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li>
<li>Redis支持数据的备份，集群等高可用功能。</li>
</ul>
<p><strong>特点:</strong></p>
<ul>
<li>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</li>
<li>丰富的数据类型 – Redis支持的类型 String, List, Hash, Set 及 Ordered Set 数据类型操作。</li>
<li>原子 – Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</li>
<li>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>
</ul>
<p><strong>Redis是一个简单的，高效的，分布式的，基于内存的缓存工具。  架设好服务器后，通过网络连接（类似数据库），提供Key－Value式缓存服务</strong>。</p>
<p><strong>简单，是Redis突出的特色。  简单可以保证核心功能的稳定和优异。</strong> </p>
<p><strong>Redis总结</strong></p>
<blockquote>
<p>redis单个key 存入512M大小</p>
<p>redis支持多种类型的数据结构(string,list,hash.set.zset)</p>
<p>redis 是单线程   原子性    </p>
<p>redis可以持久化  因为使用了 RDB和AOF机制  </p>
<p>redis支持集群   而且redis 支持库(0-15) 16个库 </p>
<p>redis 还可以做消息队列  比如聊天室  IM </p>
</blockquote>
<p>企业级开发中:可以用作数据库、缓存(热点数据（经常会被查询，但是不经常被修改或者删除的数据)和消息中间件等大部分功能。</p>
<p><strong>优点：</strong>  </p>
<ol>
<li><p>丰富的数据结构</p>
</li>
<li><p>高速读写，redis使用自己实现的分离器，代码量很短，没有使用lock（MySQL），因此效率非常高。</p>
</li>
</ol>
<p><strong>缺点：</strong>  </p>
<ol>
<li>持久化。Redis直接将数据存储到内存中，要将数据保存到磁盘上，Redis可以使用两种方式实现持久化过程。定时快照（snapshot）：每隔一段时间将整个数据库写到磁盘上，每次均是写全部数据，代价非常高。第二种方式基于语句追加（aof）：只追踪变化的数据，但是追加的log可能过大，同时所有的操作均重新执行一遍，回复速度慢。  </li>
<li>耗内存，占用内存过高。</li>
</ol>
<h3 id="redis安装"><a href="#redis安装" class="headerlink" title="redis安装"></a>redis安装</h3><ol>
<li><p>保Linux已经安装gcc</p>
</li>
<li><p>下载Redis<br>wget <a href="http://download.redis.io/releases/redis-4.0.1.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-4.0.1.tar.gz</a></p>
</li>
<li><p>解压<br>tar -zxvf redis-4.0.1.tar.gz</p>
</li>
<li><p>进入目录后编译<br>cd redis-4.0.1<br>make MALLOC=libc</p>
</li>
<li><p>安装<br>make PREFIX=/usr/local/redis install #指定安装目录为/usr/local/redis</p>
</li>
<li><p>启动<br>/usr/local/redis/bin/redis-server</p>
</li>
</ol>
<h3 id="Redis配置"><a href="#Redis配置" class="headerlink" title="Redis配置"></a>Redis配置</h3><ol>
<li><p>进入解压的Redis目录，将redis.conf复制到安装文件的目录下<br>cp redis.conf /usr/local/redis</p>
</li>
<li><p>启动自定义配置的Redis<br>/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</p>
</li>
</ol>
<h3 id="配置详解"><a href="#配置详解" class="headerlink" title="配置详解"></a>配置详解</h3><ul>
<li><p>daemonize ： 默认为no，修改为yes启用守护线程</p>
</li>
<li><p>port ：设定端口号，默认为6379</p>
</li>
<li><p>bind ：绑定IP地址</p>
</li>
<li><p>databases ：数据库数量，默认16</p>
</li>
<li><p>save<code><second></code> <code><changes></code>：指定多少时间、有多少次更新操作，就将数据同步到数据文件</p>
</li>
<li><p>#redis默认配置有三个条件，满足一个即进行持久化</p>
<ul>
<li><p>save 900 1 #900s有1个更改</p>
</li>
<li><p>save 300 10 #300s有10个更改</p>
</li>
<li><p>save 60 10000 #60s有10000更改</p>
</li>
</ul>
</li>
<li><p>dbfilename ：指定本地数据库的文件名，默认为dump.rdb</p>
</li>
<li><p>dir ：指定本地数据库的存放目录，默认为./当前文件夹</p>
</li>
<li><p>requirepass ：设置密码，默认关闭</p>
</li>
<li><p>redis -cli -h host -p port -a password</p>
</li>
</ul>
<h3 id="Redis关闭"><a href="#Redis关闭" class="headerlink" title="Redis关闭"></a>Redis关闭</h3><ul>
<li>使用kill命令 (非正常关闭，数据易丢失)<br><code>ps -ef|grep -i redis</code><br><code>kill -9 PID</code></li>
<li>正常关闭(会保存数据)<br><code>redis-cli shutdown</code></li>
</ul>
<h2 id="redis常用命令"><a href="#redis常用命令" class="headerlink" title="redis常用命令"></a>redis常用命令</h2><h3 id="公用命令"><a href="#公用命令" class="headerlink" title="公用命令"></a>公用命令</h3><blockquote>
<p>DEL key 删除key<br>DUMP key：序列化给定key，返回被序列化的值<br>EXISTS key：检查key是否存在<br>EXPIRE key second：为key设定过期时间<br>TTL key：返回key剩余时间<br>PERSIST key：移除key的过期时间，key将持久保存<br>KEYS pattern：查询所有符号给定模式的key<br>      *表示所有 ？表示一个字符<br>RANDOM key：随机返回一个key<br>RANAME key newkey：修改key的名称<br>MOVE key db：移动key至指定数据库中<br>TYPE key：返回key所储存的值的类型</p>
</blockquote>
<blockquote>
<p>EXPIRE key second的使用场景：<br>1、限时的优惠活动<br>2、网站数据缓存<br>3、手机验证码<br>4、限制网站访客频率</p>
</blockquote>
<h3 id="key的命名建议"><a href="#key的命名建议" class="headerlink" title="key的命名建议"></a>key的命名建议</h3><blockquote>
<p>key不要太长，尽量不要超过1024字节。不仅消耗内存，也会降低查找的效率<br>key不要太短，太短可读性会降低<br>在一个项目中，key最好使用统一的命名模式，如user:123:password<br>key区分大小写</p>
</blockquote>
<h3 id="string"><a href="#string" class="headerlink" title="string"></a>string</h3><blockquote>
<p>string类型是二进制安全的，redis的string可以包含任何数据，如图像、序列化对象。一个键最多能存储512MB。二进制安全是指，在传输数据的时候，能保证二进制数据的信息安全，也就是不会被篡改、破译；如果被攻击，能够及时检测出来</p>
</blockquote>
<blockquote>
<p>set  key_name value：命令不区分大小写，但是key_name区分大小写<br><strong>SETNX key value</strong>：当key不存在时设置key的值。（SET if Not eXists）<br>get key_name<br>GETRANGE key start end：获取key中字符串的子字符串，从start开始，end结束<br>MGET key1 [key2 …]：获取多个key<br>GETSET KEY_NAME VALUE：设定key的值，并返回key的旧值。当key不存在，返回nil<br>STRLEN key：返回key所存储的字符串的长度</p>
<p><strong>INCR KEY_NAME</strong> ：INCR命令key中存储的值+1,如果不存在key，则key中的值话先被初始化为0再加1<br>I<strong>NCRBY KEY_NAME</strong> 增量<br><strong>DECR KEY_NAME</strong>：key中的值自减一<br><strong>DECRBY KEY_NAME</strong></p>
<p>append key_name value：字符串拼接，追加至末尾，如果不存在，为其赋值</p>
</blockquote>
<h3 id="String应用场景："><a href="#String应用场景：" class="headerlink" title="String应用场景："></a>String应用场景：</h3><ol>
<li>String通常用于保存单个字符串或JSON字符串数据</li>
<li>因为String是二进制安全的，所以可以把保密要求高的图片文件内容作为字符串来存储</li>
<li>计数器：常规Key-Value缓存应用，如微博数、粉丝数。INCR本身就具有原子性特性，所以不会有线程安全问题</li>
</ol>
<h3 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h3><blockquote>
<p>Redis hash是一个string类型的field和value的映射表，hash特别适用于存储对象。每个hash可以存储232-1键值对。可以看成KEY和VALUE的MAP容器。相比于JSON，hash占用很少的内存空间。</p>
</blockquote>
<h5 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h5><blockquote>
<p>HSET key_name field value：为指定的key设定field和value<br>hmset key field value[field1,value1]<br>hget key field<br>hmget key field[field1] 存储多个键值<br>hgetall key：返回hash表中所有字段和值<br>hkeys key：获取hash表所有字段<br>hlen key：获取hash表中的字段数量<br>-hdel key field [field1]：删除一个或多个hash表的字段</p>
<p>hsetnx key field value:当字段不存在时，设置哈希表字段的值</p>
<p>hincrby key field increment:为哈希表key中的指定字段的整数值加上增量increment</p>
<p>hexists key field:指定名称是否存在</p>
</blockquote>
<p>应用场景</p>
<p>Hash的应用场景，通常用来存储一个用户信息的对象数据。</p>
<ol>
<li><p>相比于存储对象的string类型的json串，json串修改单个属性需要将整个值取出来。而hash不需要。</p>
</li>
<li><p>相比于多个key-value存储对象，hash节省了很多内存空间</p>
</li>
<li><p>如果hash的属性值被删除完，那么hash的key也会被redis删除</p>
</li>
</ol>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>类似于Java中的LinkedList。</p>
<h5 id="常用命令-1"><a href="#常用命令-1" class="headerlink" title="常用命令"></a>常用命令</h5><blockquote>
<p>赋值</p>
<p>lpush key value1 [value2]<br>rpush key value1 [value2]<br>lpushx key value：从左侧插入值，如果list不存在，则不操作<br>rpushx key value：从右侧插入值，如果list不存在，则不操作</p>
<p>取值</p>
<p>llen key：获取列表长度<br>lindex key index：获取指定索引的元素<br>lrange key start stop：获取列表指定范围的元素</p>
<p>删除</p>
<p>lpop key ：从左侧移除第一个元素<br>prop key：移除列表最后一个元素<br>blpop key [key1] timeout(秒)：移除并获取列表第一个元素，如果列表没有元素会阻塞列表到等待超时或发现可弹出元素为止<br>brpop key [key1] timeout(秒)：移除并获取列表最后一个元素，如果列表没有元素会阻塞列表到等待超时或发现可弹出元素为止</p>
<p>修改</p>
<p>ltrim key start stop ：对列表进行修改，让列表只保留指定区间的元素，不在指定区间的元素就会被删除<br>lset key index value ：指定索引的值<br>linsert key before|after pivot value：在列表元素前或则后插入元素（会找到左边第一个找到的pivot）</p>
</blockquote>
<p>应用场景</p>
<ol>
<li>对数据大的集合数据删减<br>列表显示、关注列表、粉丝列表、留言评价…分页、热点新闻等</li>
<li>任务队列<br>list通常用来实现一个消息队列，而且可以确保先后顺序，不必像MySQL那样通过order by来排序</li>
</ol>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><blockquote>
<p>rpoplpush list1 list2 移除list1最后一个元素，并将该元素添加到list2并返回此元素<br>用此命令可以实现订单下单流程、用户系统登录注册短信等。</p>
</blockquote>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><blockquote>
<p>唯一、无序，相当于hashtable</p>
<p>redis的集合对象set底层使用了intset和hashtable两种数据结构存储的，intset可以理解为数组，hashtable就是普通的哈希表。</p>
<p>inset内部其实是一个数组，而且存储数据的时候时有序的，因为在查找数据的时候时通过二分查找来实现的。</p>
</blockquote>
<blockquote>
<p>赋值<br>sadd key value1[value2]：向集合添加成员<br>取值<br>scard key：返回集合成员数<br>smembers key：返回集合中所有成员<br>sismember key member：判断memeber元素是否是集合key成员的成员<br>srandmember key [count]：返回集合中一个或多个随机数<br>删除<br>srem key member1 [member2]：移除集合中一个或多个成员<br>spop key：移除并返回集合中的一个随机元素<br>smove source destination member：将member元素从source集合移动到destination集合</p>
<p>高级用法</p>
<p>sdiff key1 [key2]：返回所有集合的差集</p>
<p>sinter key1 [key2]: 返回给定所有集合的交集</p>
<p>sunion key1 [key2]: 返回给定集合的并集</p>
<p>sdiffstore(sinterstore,sunionstore) destination key1[key2]：返回给定所有集合的差集并存储在destination中对两个集合间的数据[计算]进行交集、并集、差集运算</p>
</blockquote>
<p>1、以非常方便的实现如共同关注、共同喜好、二度好友等功能。对上面的所有集合操作，你还可以使用不同的命令选择将结果返回给客户端还是存储到一个新的集合中。<br>2、利用唯一性，可以统计访问网站的所有独立 IP</p>
<h3 id="zset"><a href="#zset" class="headerlink" title="zset"></a>zset</h3><blockquote>
<p>有序且不重复。每个元素都会关联一个double类型的分数，Redis通过分数进行从小到大的排序。分数可以重复</p>
</blockquote>
<blockquote>
<p>赋值</p>
<p>ZADD key score1 memeber1</p>
<p>取值</p>
<p>ZCARD key ：获取集合中的元素数量<br>ZCOUNT key min max 计算在有序集合中指定区间分数的成员数<br>ZRANK key member：返回有序集合指定成员的索引<br>ZREVRANGE key start stop ：返回有序集中指定区间内的成员，通过索引，分数从高到底</p>
<p>删除</p>
<p>ZREM key member [member …] 移除有序集合中的一个或多个成员<br>ZREMRANGEBYRANK key start stop 移除有序集合中给定的排名区间的所有成员(第一名是0)(低到高排序）<br>ZREMRANGEBYSCORE key min max 移除有序集合中给定的分数区间的所有成员</p>
</blockquote>
<p>常用于排行榜：</p>
<ol>
<li>如推特可以以发表时间作为score来存储</li>
<li>存储成绩</li>
<li>还可以用zset来做带权重的队列，让重要的任务先执行</li>
</ol>
<h2 id="redis使用进阶"><a href="#redis使用进阶" class="headerlink" title="redis使用进阶"></a>redis使用进阶</h2><h3 id="redis发布订阅"><a href="#redis发布订阅" class="headerlink" title="redis发布订阅"></a>redis发布订阅</h3><blockquote>
<p>subscribe channel [channel …] 订阅给定的一个或多个频道信息</p>
<p>psubscribe pattern [pattern …] 订阅一个或多个符合给定模式的频道</p>
<p>publish channel message 将消息发送到指定的频道</p>
<p>unsubscribe 退订给定的频道</p>
<p>punsubscribe 退订所有给定模式的频道</p>
</blockquote>
<p>应用场景</p>
<p>这一功能最明显的用法就是构建实时消息系统，比如普通的即时聊天，群聊等功能</p>
<ol>
<li>在一个博客网站中, 有100个粉丝订阅了你，当你发送新文章，就可以推送消息给粉丝</li>
<li>微信公众号模式</li>
</ol>
<h3 id="redis多数据库"><a href="#redis多数据库" class="headerlink" title="redis多数据库"></a>redis多数据库</h3><blockquote>
<p> select 数据库 : 用于切换数据库</p>
<p> move key db 移动数据</p>
<p> flushdb 清除当前数据库所有key</p>
<p> flushall 清除整个redis的数据库所有key</p>
</blockquote>
<h3 id="redis事务"><a href="#redis事务" class="headerlink" title="redis事务"></a>redis事务</h3><blockquote>
<p>Redis事务可以一次执行多个命令(允许在一次单独的步骤中执行一组命令) ，并且带有以下两个重要的保证:</p>
<p>批量操作在发送EXEC命令前被放入队列缓存。</p>
<p>收到EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。</p>
<ol>
<li><p>Redis会将一个事务中的所有命令序列化，然后按顺序执行</p>
</li>
<li><p>执行中不会被其它命令插入，不许出现加赛行为</p>
</li>
</ol>
<p><strong>一个事务从开始到执行会经历以下三个阶段:</strong></p>
<p>开始事务。命令入队。执行事务。</p>
<p><strong>事务的错误处理</strong>:</p>
<ol>
<li>出现逻辑错误时（例如：incr hello,   给非数字加1），队列会继续执行</li>
<li>队列中的某个命令出现了报告错误（输入未知命令），执行时整个的所有队列都会被取消。</li>
</ol>
<p>事务命令</p>
<ol>
<li>DISCARD 取消事务，放弃执行事务块内的所有命令</li>
<li>EXEC 执行所有事务块内的命令</li>
<li>MULTI 标记一个事务块内的命令</li>
<li>UNWATCH 取消WATCH命令对所有key的监视</li>
<li>WATCH key [key …] 监视一个（或多个）key，如果在事务执行之前这个（或这些）key被其他命令所改动，那么事务将被打断</li>
</ol>
</blockquote>
<h3 id="redis-数据淘汰策略"><a href="#redis-数据淘汰策略" class="headerlink" title="redis 数据淘汰策略"></a>redis 数据淘汰策略</h3><blockquote>
<p>Redis官方给的警告，当内存不足时，Redis会根据配置的缓存策略淘汰部分Keys,以保证写入成功当无淘汰策略时或没有找到适合淘汰的Key时,Redis直接返回out of memory错误。</p>
</blockquote>
<blockquote>
<p>六种淘汰策略</p>
<ol>
<li>volatile-ru:从已设置过期时间的数据集中挑选最近最少使用的数据淘汰</li>
<li>volatile-lfu: 从已设置过期的Keys中，删除一段时间内使用次数最少使用的</li>
<li>volatile-ttl:从已设置过期时间的数据集中挑选最近将要过期的数据淘汰</li>
<li>volatile-random: 从已设置过期时间的数据集中随机选择数据淘汰</li>
<li>allkeys-lru:从数据集中挑选最近最少使用的数据淘汰</li>
<li>allkeys-lfu:从所有Keys中，删除-段时间内使用次数最少使用的</li>
<li>allkeys-random:从数据集中随机选择数据淘汰</li>
<li>no-enviction (驱逐):禁止驱逐数据(不采用任何淘汰策略。默认即为此配置),针对写操作，返回错误信息.</li>
</ol>
<p>建议:了解了Redis的淘汰策略之后,在平时使用时应尽量主动设置/更新key的expire时间，主动剔除不活跃的旧数据，有助于提升查询性能</p>
</blockquote>
<h3 id="redis持久化"><a href="#redis持久化" class="headerlink" title="redis持久化"></a>redis持久化</h3><blockquote>
<p>数据存放于:</p>
<ol>
<li>内存:高效、断电(关机)内存数据会丢失</li>
<li>硬盘:读写速度慢于内存，断电数据不会丢失</li>
</ol>
</blockquote>
<h4 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h4><p>RDB:是redis的默认持久化机制。RDB相当于照快照,保存的是一种状态。</p>
<p><strong>几十G数据一》几KB快照</strong></p>
<p>快照是默认的持久化方式。这种方式是就是将内存中数据以快照的方式写入到二进制文件中,默认的文件名为dump. rdb。</p>
<p>优点:1.快照保存数据极快、还原数据极快。2.适用于灾难备份。</p>
<p>缺点:小内存机器不适合使用, RDB机制符合要求就会照快照</p>
<p><strong>快照条件:</strong></p>
<p>1、服务器正常关闭时. /bin/redis-cli Shutdown</p>
<p>2、key满足一定条件，会进行快照</p>
<blockquote>
<p>vim redis. conf搜索 save</p>
<p>save 900 1    //每900秒(15分钟)至少1个key发生变化，产生快照</p>
<p>save 300 10  //每300秒(5分钟)至少10个key发生变化，产生快照</p>
<p>save 60 10000  //每60秒(1分钟)至少10000个key发生变化，产生快照</p>
</blockquote>
<h4 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h4><blockquote>
<p>由于快照方式是在一定间隔时间做一次的， 所以如果redis意外down掉的话，就会丢失最后一次快照后的所有修改。如果应用要求不能丢失任何修改的话，可以采用aof 持久化方式。</p>
<p>Append-only file:aof 比快照方式有更好的持久化性，是由于在使用aof 持久化方式时,redis会将每一个收到的写命令都通过write函数追加到文件中(默认是appendonly.aof)。 当redis重启时会通过重新执行文件中保存的写命令来在内存中重建整个数据库的内容。</p>
</blockquote>
<p><strong>有三种方式如下(默认是:每秒fsync一次)</strong></p>
<blockquote>
<p>appendonly yes//启用aof 持久化方式</p>
<p>appendfsync always //收到写命令就立即写入磁盘,最慢，但是保证完全的持久化</p>
<p>appendfsync everysec //每秒钟写入磁盘一次，在性能和持久化方面做了很好的折中.</p>
<p>appendfsync no //完全依赖os, 性能最好,持久化没保证</p>
</blockquote>
<p><strong>产生的问题:</strong></p>
<p>aof的方式也同时带来了另一个问题。持久化文件会变的越来越大。例如我们调用incr test命令100次，文件中必须保存全部的100 条命令，其实有99条都是多余的。</p>
<h3 id="java连接redis"><a href="#java连接redis" class="headerlink" title="java连接redis"></a>java连接redis</h3><p><strong>使用Jedis</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!-- https://mvnrepository.com/artifact/redis.clients/jedis --></span></span><br><span class="line"><span class="tag"><<span class="name">dependency</span>></span>  </span><br><span class="line">	<span class="tag"><<span class="name">groupId</span>></span>redis.clients<span class="tag"></<span class="name">groupId</span>></span>  </span><br><span class="line">	<span class="tag"><<span class="name">artifactId</span>></span>jedis<span class="tag"></<span class="name">artifactId</span>></span>  </span><br><span class="line">	<span class="tag"><<span class="name">version</span>></span>3.2.0<span class="tag"></<span class="name">version</span>></span></span><br><span class="line"><span class="tag"></<span class="name">dependency</span>></span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Jedis j = <span class="keyword">new</span> Jedis(<span class="string">"192.168.0.107"</span>,<span class="number">6379</span>);</span><br><span class="line">j.auth(<span class="string">"915540781"</span>);</span><br><span class="line">List<String> mget = j.mget(<span class="string">"STR"</span>, <span class="string">"hanzi"</span>,<span class="string">"feffa"</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : mget) {</span><br><span class="line">    System.out.println(s);</span><br><span class="line">}</span><br><span class="line">j.close();</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JedisPoolConfig pool = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">pool.setMaxTotal(<span class="number">5</span>);<span class="comment">//最大连接数</span></span><br><span class="line">pool.setMaxIdle(<span class="number">1</span>);<span class="comment">//最大空闲</span></span><br><span class="line">JedisPool jedisPool = <span class="keyword">new</span> JedisPool(pool,<span class="string">"192.168.0.107"</span>,<span class="number">6379</span>);</span><br><span class="line">Jedis resource = jedisPool.getResource();</span><br><span class="line">System.out.println(jedisPool.getNumActive());</span><br></pre></td></tr></tbody></table></figure>

<p><strong>redisTemplate</strong></p>
<blockquote>
<p>简介</p>
<p>Spring data提供了redistemplate模板，他封装了redis连接池的逻辑，业务代码无需关心获取，释放逻辑；spring redis 同时支持了jedis，jreis，rjc客户端操作；在redistemplate中提供了几个常用的接口方法，分别是</p>
</blockquote>
<p>spring-redis.xml</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/tx/spring-tx.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:redis.properties"</span>/></span></span><br><span class="line">    <span class="comment"><!--1、配置连接池信息--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"redisPoolConfig"</span> <span class="attr">class</span>=<span class="string">"redis.clients.jedis.JedisPoolConfig"</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTotal"</span> <span class="attr">value</span>=<span class="string">"${redis.maxTotal}"</span>/></span> <span class="comment"><!--最大连接数--></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"${redis.maxIdle}"</span>/></span> <span class="comment"><!--最大空闲数--></span></span><br><span class="line">    <span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="comment"><!--2、spring整合jedis--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jedisConnectionFactory"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"poolConfig"</span> <span class="attr">ref</span>=<span class="string">"redisPoolConfig"</span>/></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hostName"</span> <span class="attr">value</span>=<span class="string">"${redis.hostname}"</span>/></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"port"</span> <span class="attr">value</span>=<span class="string">"${redis.port}"</span>/></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"${redis.password}"</span>/></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="comment"><!--string序列化类 默认为jdk序列化 JdkSerializationRedisSerializer会对所有的key和value还有hashkey和hashvalue的原始字符前，都加了一串字符串。--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"stringRedisSerializer"</span> <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.serializer.StringRedisSerializer"</span>/></span></span><br><span class="line">    <span class="comment"><!--3、RedisTemplate--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"redisTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.core.RedisTemplate"</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connectionFactory"</span> <span class="attr">ref</span>=<span class="string">"jedisConnectionFactory"</span>/></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"keySerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/></span></span><br><span class="line">        <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"valueSerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/></span></span><br><span class="line">    <span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.cms.test"</span>/></span></span><br><span class="line"><span class="tag"></<span class="name">beans</span>></span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">redisTemplateTest</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisTemplate<String,String> redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getString</span><span class="params">(String key)</span></span>{</span><br><span class="line">        ValueOperations<String, String> string = redisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">if</span> (redisTemplate.hasKey(key)){</span><br><span class="line">            System.out.println(<span class="string">"redis find"</span>+string.get(key));</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            String result = <span class="string">"test"</span>;</span><br><span class="line">            string.set(key,result);</span><br><span class="line">            System.out.println(<span class="string">"mysql find"</span>+result);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>{</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(</span><br><span class="line">                <span class="string">"spring-redis.xml"</span></span><br><span class="line">        );</span><br><span class="line">        redisTemplateTest bean = context.getBean(redisTemplateTest<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        bean.getString(<span class="string">"redis:template:test"</span>);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>java端</p>
<p><img alt="image-20200402162652297" data-src="http://yhaq.top/group1/M00/00/01/rBGWVV71ZIOAe8xeAAAi1l5HpSw423.png" class="lazyload"></p>
<p>查询linux中数据</p>
<p><img alt="image-20200402162747800" data-src="http://yhaq.top/group1/M00/00/01/rBGWVV71ZGyATyndAAAcIRSwkW0420.png" class="lazyload"></p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Nigtunt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://nigtunt.github.io/2020/06/26/redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">https://nigtunt.github.io/2020/06/26/redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://nigtunt.github.io">Nigtunt</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/redis/">redis    </a><a class="post-meta__tags" href="/tags/NoSql/">NoSql    </a></div><div class="post_share"><div class="social-share" data-image="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1593150327676&amp;di=8ef7dfd43f130358b5ecea1d9b96cca1&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201202%2F26%2F213356orhd1dob1wq9exbn.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/26/%E4%BD%BF%E7%94%A8redis%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98/"><img class="prev_cover lazyload" data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1303138373,851257239&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>使用redis存在的问题</span></div></a></div><div class="next-post pull_right"><a href="/2020/06/05/mysql%E5%90%84%E7%A7%8D%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"><img class="next_cover lazyload" data-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1591378700831&amp;di=9aebeaaacff9db58b0e8e3f6865d675c&amp;imgtype=0&amp;src=http%3A%2F%2Fcdn.45squared.com%2Fwp-content%2Fuploads%2F20180304110830%2Fmysql-logo.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>mysql各种面试问题总结</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/26/使用redis存在的问题/" title="使用redis存在的问题"><img class="relatedPosts_cover lazyload"data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1303138373,851257239&fm=26&gp=0.jpg"><div class="relatedPosts_title">使用redis存在的问题</div></a></div><div class="relatedPosts_item"><a href="/2020/06/27/redis补充/" title="redis补充"><img class="relatedPosts_cover lazyload"data-src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1727875035,1058014352&fm=26&gp=0.jpg"><div class="relatedPosts_title">redis补充</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1593150327676&amp;di=8ef7dfd43f130358b5ecea1d9b96cca1&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201202%2F26%2F213356orhd1dob1wq9exbn.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Nigtunt</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://jerryc.me/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/baidupush.js"> </script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>