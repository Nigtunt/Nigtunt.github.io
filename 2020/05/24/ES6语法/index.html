<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ES6语法 | Nigtunt</title><meta name="description" content="ES6语法"><meta name="keywords" content="JavaScript,ES6"><meta name="author" content="Nigtunt"><meta name="copyright" content="Nigtunt"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="ES6语法"><meta name="twitter:description" content="ES6语法"><meta name="twitter:image" content="http://a.hiphotos.baidu.com/baike/pic/item/d009b3de9c82d15834a6cbdd890a19d8bc3e42b2.jpg"><meta property="og:type" content="article"><meta property="og:title" content="ES6语法"><meta property="og:url" content="https://nigtunt.github.io/2020/05/24/ES6%E8%AF%AD%E6%B3%95/"><meta property="og:site_name" content="Nigtunt"><meta property="og:description" content="ES6语法"><meta property="og:image" content="http://a.hiphotos.baidu.com/baike/pic/item/d009b3de9c82d15834a6cbdd890a19d8bc3e42b2.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://nigtunt.github.io/2020/05/24/ES6%E8%AF%AD%E6%B3%95/"><link rel="prev" title="设计模式(三)行为型模式" href="https://nigtunt.github.io/2020/05/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%B8%89-%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><link rel="next" title="设计模式(二)结构型模式" href="https://nigtunt.github.io/2020/05/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%8C-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Nigtunt</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://yhaq.top/group1/M00/00/00/head.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">132</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">37</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ES6中的import导入模块"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">ES6中的import导入模块</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-安装-babel-node"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">1. 安装 babel-node</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-安装-presets-并配置-babelrc-文件"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">2. 安装 presets 并配置 .babelrc 文件</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#第一种-babel-preset-env-写法"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">第一种 babel-preset-env 写法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#第二种-babel-preset-env-写法"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">第二种 @babel&#x2F;preset-env 写法</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-执行-babel-node"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">3. 执行 babel-node</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ES6-语法指南"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">ES6 语法指南</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1、let-和-const-命令"><span class="toc_mobile_items-number">2.0.1.</span> <span class="toc_mobile_items-text">1、let 和 const 命令</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2、对象的增强写法"><span class="toc_mobile_items-number">2.0.2.</span> <span class="toc_mobile_items-text">2、对象的增强写法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3、字符串扩展"><span class="toc_mobile_items-number">2.0.3.</span> <span class="toc_mobile_items-text">3、字符串扩展</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4、数组"><span class="toc_mobile_items-number">2.0.4.</span> <span class="toc_mobile_items-text">4、数组</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#数组排序"><span class="toc_mobile_items-number">2.0.4.1.</span> <span class="toc_mobile_items-text">数组排序</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#数组的合并与剪切"><span class="toc_mobile_items-number">2.0.4.2.</span> <span class="toc_mobile_items-text">数组的合并与剪切</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#数组元素删除、插入、替换"><span class="toc_mobile_items-number">2.0.4.3.</span> <span class="toc_mobile_items-text">数组元素删除、插入、替换</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#重点-for-in与for-of遍历数组"><span class="toc_mobile_items-number">2.0.4.4.</span> <span class="toc_mobile_items-text">(重点)for-in与for-of遍历数组</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#重点-数组迭代判定"><span class="toc_mobile_items-number">2.0.4.5.</span> <span class="toc_mobile_items-text">(重点)数组迭代判定</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#重点-数组成员的迭代处理"><span class="toc_mobile_items-number">2.0.4.6.</span> <span class="toc_mobile_items-text">(重点)数组成员的迭代处理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#重点-数组的过滤与归并计算"><span class="toc_mobile_items-number">2.0.4.7.</span> <span class="toc_mobile_items-text">(重点)数组的过滤与归并计算</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5、解构表达式"><span class="toc_mobile_items-number">2.0.5.</span> <span class="toc_mobile_items-text">5、解构表达式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6、函数优化"><span class="toc_mobile_items-number">2.0.6.</span> <span class="toc_mobile_items-text">6、函数优化</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-promise"><span class="toc_mobile_items-number">2.0.7.</span> <span class="toc_mobile_items-text">7.promise</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#异步操作与同步操作"><span class="toc_mobile_items-number">2.0.7.1.</span> <span class="toc_mobile_items-text">异步操作与同步操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#传统异步操作中的问题"><span class="toc_mobile_items-number">2.0.7.2.</span> <span class="toc_mobile_items-text">传统异步操作中的问题</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Promise的三种状态"><span class="toc_mobile_items-number">2.0.7.3.</span> <span class="toc_mobile_items-text">Promise的三种状态</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Promise基础语法"><span class="toc_mobile_items-number">2.0.7.4.</span> <span class="toc_mobile_items-text">Promise基础语法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#链式调用"><span class="toc_mobile_items-number">2.0.7.5.</span> <span class="toc_mobile_items-text">链式调用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Promise的all方法"><span class="toc_mobile_items-number">2.0.7.6.</span> <span class="toc_mobile_items-text">Promise的all方法</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-set和map（了解）"><span class="toc_mobile_items-number">2.0.8.</span> <span class="toc_mobile_items-text">8.set和map（了解）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-模块化"><span class="toc_mobile_items-number">2.0.9.</span> <span class="toc_mobile_items-text">9.模块化</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#什么是模块化"><span class="toc_mobile_items-number">2.0.9.1.</span> <span class="toc_mobile_items-text">什么是模块化</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#export"><span class="toc_mobile_items-number">2.0.9.2.</span> <span class="toc_mobile_items-text">export</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-3-8-3-import"><span class="toc_mobile_items-number">2.0.9.3.</span> <span class="toc_mobile_items-text">4.3.8.3.import</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ES6中的import导入模块"><span class="toc-number">1.</span> <span class="toc-text">ES6中的import导入模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-安装-babel-node"><span class="toc-number">1.1.</span> <span class="toc-text">1. 安装 babel-node</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-安装-presets-并配置-babelrc-文件"><span class="toc-number">1.2.</span> <span class="toc-text">2. 安装 presets 并配置 .babelrc 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#第一种-babel-preset-env-写法"><span class="toc-number">1.2.1.</span> <span class="toc-text">第一种 babel-preset-env 写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第二种-babel-preset-env-写法"><span class="toc-number">1.2.2.</span> <span class="toc-text">第二种 @babel&#x2F;preset-env 写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-执行-babel-node"><span class="toc-number">1.3.</span> <span class="toc-text">3. 执行 babel-node</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ES6-语法指南"><span class="toc-number">2.</span> <span class="toc-text">ES6 语法指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、let-和-const-命令"><span class="toc-number">2.0.1.</span> <span class="toc-text">1、let 和 const 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、对象的增强写法"><span class="toc-number">2.0.2.</span> <span class="toc-text">2、对象的增强写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、字符串扩展"><span class="toc-number">2.0.3.</span> <span class="toc-text">3、字符串扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、数组"><span class="toc-number">2.0.4.</span> <span class="toc-text">4、数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数组排序"><span class="toc-number">2.0.4.1.</span> <span class="toc-text">数组排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数组的合并与剪切"><span class="toc-number">2.0.4.2.</span> <span class="toc-text">数组的合并与剪切</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数组元素删除、插入、替换"><span class="toc-number">2.0.4.3.</span> <span class="toc-text">数组元素删除、插入、替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重点-for-in与for-of遍历数组"><span class="toc-number">2.0.4.4.</span> <span class="toc-text">(重点)for-in与for-of遍历数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重点-数组迭代判定"><span class="toc-number">2.0.4.5.</span> <span class="toc-text">(重点)数组迭代判定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重点-数组成员的迭代处理"><span class="toc-number">2.0.4.6.</span> <span class="toc-text">(重点)数组成员的迭代处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重点-数组的过滤与归并计算"><span class="toc-number">2.0.4.7.</span> <span class="toc-text">(重点)数组的过滤与归并计算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、解构表达式"><span class="toc-number">2.0.5.</span> <span class="toc-text">5、解构表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、函数优化"><span class="toc-number">2.0.6.</span> <span class="toc-text">6、函数优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-promise"><span class="toc-number">2.0.7.</span> <span class="toc-text">7.promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#异步操作与同步操作"><span class="toc-number">2.0.7.1.</span> <span class="toc-text">异步操作与同步操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#传统异步操作中的问题"><span class="toc-number">2.0.7.2.</span> <span class="toc-text">传统异步操作中的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise的三种状态"><span class="toc-number">2.0.7.3.</span> <span class="toc-text">Promise的三种状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise基础语法"><span class="toc-number">2.0.7.4.</span> <span class="toc-text">Promise基础语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#链式调用"><span class="toc-number">2.0.7.5.</span> <span class="toc-text">链式调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise的all方法"><span class="toc-number">2.0.7.6.</span> <span class="toc-text">Promise的all方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-set和map（了解）"><span class="toc-number">2.0.8.</span> <span class="toc-text">8.set和map（了解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-模块化"><span class="toc-number">2.0.9.</span> <span class="toc-text">9.模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是模块化"><span class="toc-number">2.0.9.1.</span> <span class="toc-text">什么是模块化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#export"><span class="toc-number">2.0.9.2.</span> <span class="toc-text">export</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-8-3-import"><span class="toc-number">2.0.9.3.</span> <span class="toc-text">4.3.8.3.import</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://a.hiphotos.baidu.com/baike/pic/item/d009b3de9c82d15834a6cbdd890a19d8bc3e42b2.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">ES6语法</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-24<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-24</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/vue%E7%9B%B8%E5%85%B3/">vue相关</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">5.3k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 19 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="ES6中的import导入模块"><a href="#ES6中的import导入模块" class="headerlink" title="ES6中的import导入模块"></a>ES6中的import导入模块</h1><p>由于自己经常在本地写一些 js 脚本进行文件处理等工作，常常会使用 import 语法引入模块。但是 Node 在默认情况下是不支持 import </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">"fs"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-安装-babel-node"><a href="#1-安装-babel-node" class="headerlink" title="1. 安装 babel-node"></a>1. 安装 babel-node</h2><p><code>babel-node</code> 命令并非独立安装，在的 Babel 7.x 以前，需要通过安装 <code>babel-cli</code> 包获得。而 Babel 7.x 以后，babel 的模块被被拆分。因此需要安装 <code>@babel/core</code> <code>@babel/node</code> 两个包来获取。</p>
<p>如果你希望 <code>babel-node</code> 命令在全局可用，使用 <code>-g</code> 参数会让你一劳永逸。</p>
<p><strong>首先建立npm项目</strong></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></tbody></table></figure>

<p><strong>babel 7.x 以前的写法</strong></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i --save babel-cli</span><br></pre></td></tr></tbody></table></figure>

<p><strong>babel 7.x 以后的写法</strong></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save @babel/core @babel/node</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-安装-presets-并配置-babelrc-文件"><a href="#2-安装-presets-并配置-babelrc-文件" class="headerlink" title="2. 安装 presets 并配置 .babelrc 文件"></a>2. 安装 presets 并配置 .babelrc 文件</h2><p>仅单安装 <code>babel-node</code> 也没用，运行 js 文件后你会发现依然报错。这是因为 <code>babel-node</code> 对 <code>import</code> 语法默认也是关闭的，因此需要安装指定的 preset 并配置 <code>.babelrc</code> 文件来开启语法支持。</p>
<p>截止2019年1月，原有的 <code>babel-preset-es2015</code> 写法已经废弃，与之代替的是 <code>babel-preset-env</code> 或者 <code>@babel/preset-env</code>，目前以后者为推荐。（鬼知道 babel 还会不会再变…）</p>
<p>由于两个 preset 模块对应的属性不同，因此分介绍：</p>
<h3 id="第一种-babel-preset-env-写法"><a href="#第一种-babel-preset-env-写法" class="headerlink" title="第一种 babel-preset-env 写法"></a>第一种 <code>babel-preset-env</code> 写法</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i babel-preset-env --save-dev</span><br></pre></td></tr></tbody></table></figure>

<p>.babelrc 文件配置</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "preset": [ "env" ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="第二种-babel-preset-env-写法"><a href="#第二种-babel-preset-env-写法" class="headerlink" title="第二种 @babel/preset-env 写法"></a>第二种 <code>@babel/preset-env</code> 写法</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i @babel/preset-env --save-dev</span><br></pre></td></tr></tbody></table></figure>

<p>.babelrc 文件配置</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "presets": [ "@babel/preset-env" ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-执行-babel-node"><a href="#3-执行-babel-node" class="headerlink" title="3. 执行 babel-node"></a>3. 执行 babel-node</h2><p>至此经过上述配置，再通过 <code>babel-node</code> 即可执行含有 import/export 等 es6 语法的 js 文件。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ babel-node test.js</span><br><span class="line">复制代码</span><br></pre></td></tr></tbody></table></figure>

<p>最后切记由于性能问题，babel-node 仅限于在本地调试时使用，上线生产环境的代码还是需要使用 babel 进行转换，再使用 node 运行。</p>
<h1 id="ES6-语法指南"><a href="#ES6-语法指南" class="headerlink" title="ES6 语法指南"></a>ES6 语法指南</h1><h3 id="1、let-和-const-命令"><a href="#1、let-和-const-命令" class="headerlink" title="1、let 和 const 命令"></a>1、let 和 const 命令</h3><blockquote>
<p>var</p>
</blockquote>
<p>之前，js定义变量只有一个关键字：<code>var</code></p>
<p><code>var</code>有一个问题，就是定义的变量有时会莫名奇妙的成为全局变量。</p>
<p>例如这样的一段代码：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i < <span class="number">5</span>; i++){</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"循环外："</span> + i)</span><br></pre></td></tr></tbody></table></figure>

<p>你猜下打印的结果是什么？</p>
<p> <img alt data-src="https://t1.picb.cc/uploads/2020/05/24/tybMf8.jpg" class="lazyload"></p>
<blockquote>
<p>let</p>
</blockquote>
<p><code>let</code>所声明的变量，只在<code>let</code>命令所在的代码块内有效。</p>
<p>我们把刚才的<code>var</code>改成<code>let</code>试试：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i < <span class="number">5</span>; i++){</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"循环外："</span> + i)</span><br></pre></td></tr></tbody></table></figure>

<p>结果：</p>
<p><img alt data-src="https://t1.picb.cc/uploads/2020/05/24/tybOMg.jpg" class="lazyload"></p>
<blockquote>
<p>const</p>
</blockquote>
<p><code>const</code>声明的变量是常量，不能被修改</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">50</span>;</span><br><span class="line">a = <span class="number">100</span>；<span class="comment">//报错 </span></span><br><span class="line"><span class="keyword">const</span> b; <span class="comment">//报错，常量定义的时候必须赋值</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="2、对象的增强写法"><a href="#2、对象的增强写法" class="headerlink" title="2、对象的增强写法"></a>2、对象的增强写法</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>{</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">}</span><br><span class="line">Person.prototype.Print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age)</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'A'</span>,<span class="number">10</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'B'</span>,<span class="number">20</span>)</span><br><span class="line">p1.Print()</span><br><span class="line">p1.Print()</span><br></pre></td></tr></tbody></table></figure>

<p>ES5中对象最令人觉得繁琐的就是构造函数、prototype(原型)、依靠原型链实现继承。因为它使用的不是面向对象的语法，所以在使用过程中显得比较乱。下面介绍一种更简单的语法ES6的对象定义与继承的增强语法。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>{</span><br><span class="line">    <span class="keyword">constructor</span>(name, age){</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line">    Print(){</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'a'</span>,<span class="number">10</span>)</span><br><span class="line">p1.Print()</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>引入calss关键字，用于定义对象</li>
<li>构造函数的方法名称是固定的，就叫constructor。这与java等面向对象语言不同。</li>
<li>在对象定义(类)内，this关键字就代表当前实例对象。</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>{</span><br><span class="line">    <span class="keyword">constructor</span>(){</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">'student'</span></span><br><span class="line">        <span class="keyword">this</span>.age = <span class="number">20</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">let</span> s1 = <span class="keyword">new</span> student();</span><br><span class="line">s1.Print()</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>通过class关键字实现了类的继承</li>
<li>通过super()关键字调用父类构造函数，如果不传参数，默认是undefined</li>
<li>super()方法必须显示调用，否则子类找不到this指针。</li>
</ul>
<p>实际上js对象的继承原理，仍然是依靠原型链来实现的。只是ES6给我们语法糖，使得更好理解更易使用。</p>
<p><img alt="img" data-src="https://img.kancloud.cn/68/b3/68b323279d59a5bda85d67368398f548_325x126.png" class="lazyload"></p>
<h3 id="3、字符串扩展"><a href="#3、字符串扩展" class="headerlink" title="3、字符串扩展"></a>3、字符串扩展</h3><blockquote>
<p>新的API</p>
</blockquote>
<p>ES6为字符串扩展了几个新的API：</p>
<ul>
<li><code>includes()</code>：返回布尔值，表示是否找到了参数字符串。</li>
<li><code>startsWith()</code>：返回布尔值，表示参数字符串是否在原字符串的头部。</li>
<li><code>endsWith()</code>：返回布尔值，表示参数字符串是否在原字符串的尾部。</li>
</ul>
<p>实验一下：</p>
 <figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">> let str = 'hello world'</span><br><span class="line">< undefined</span><br><span class="line">> str.includes('ll')</span><br><span class="line">< true</span><br><span class="line">> str.startsWith('ha')</span><br><span class="line">< false</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>字符串模板</p>
</blockquote>
<p>ES6中提供了`来作为字符串模板标记。我们可以这么玩：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">> <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">${str}</span> ok`</span>)</span><br><span class="line">< hi hello world ok</span><br></pre></td></tr></tbody></table></figure>

<h3 id="4、数组"><a href="#4、数组" class="headerlink" title="4、数组"></a>4、数组</h3><p>熟悉下面的四个方法：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">作用位置</th>
<th align="left">功能</th>
<th align="left">例子</th>
</tr>
</thead>
<tbody><tr>
<td align="left">push</td>
<td align="left">数组尾部</td>
<td align="left">向数组尾部加n项</td>
<td align="left">person.push(“adu”,”wade”)</td>
</tr>
<tr>
<td align="left">pop</td>
<td align="left">数组尾部</td>
<td align="left">从数组尾部取1项，并在数组中删除该项</td>
<td align="left">person.pop()</td>
</tr>
<tr>
<td align="left">unshift</td>
<td align="left">数组头部</td>
<td align="left">向数组头部加n项</td>
<td align="left">person.unshift(“adu”,”wade”)</td>
</tr>
<tr>
<td align="left">shift</td>
<td align="left">数组头部</td>
<td align="left">从数组头部取1项，并在数组中删除该项</td>
<td align="left">person.shift()</td>
</tr>
</tbody></table>
<h4 id="数组排序"><a href="#数组排序" class="headerlink" title="数组排序"></a>数组排序</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>  values  =  [<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">19</span>]</span><br><span class="line">values.reverse()  <span class="comment">//数组倒序方法</span></span><br><span class="line"><span class="built_in">console</span>.log(values.toString()) <span class="comment">//数组倒序：19,10,5,2,1</span></span><br><span class="line">values.sort()   <span class="comment">//数组排序方法</span></span><br><span class="line"><span class="built_in">console</span>.log(values.toString()) <span class="comment">//数组正向排序：1,10,19,2,5</span></span><br></pre></td></tr></tbody></table></figure>

<p>大家看到上面代码中最终的排序结果是[1,10,19,2,5]。而我们期望的结果是[1,2,5,10,19],这是因为sort()方法默认将每一项 toString()之后在比较，字符串1,10,19的第一位都是1，所以小于2和5.<br>那么我们怎么让它正确排序呢？我们可以自定义比较规则，即：自定义比较函数</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function  <span class="title">compare</span><span class="params">(value1,value2)</span></span>{   <span class="comment">//定义比较规则的函数</span></span><br><span class="line">    <span class="keyword">return</span>  value1  -  value2  <span class="comment">//返回值三种可能，0，大于0，小于0</span></span><br><span class="line">}</span><br><span class="line">values.sort(compare)     <span class="comment">//使用比较规则</span></span><br><span class="line">console.log(values.toString()) <span class="comment">//排序结果：1,2,5,10,19</span></span><br></pre></td></tr></tbody></table></figure>

<p>排序规则函数，通过返回0或者大于0或者小于0的数，来影响排序结果。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [{<span class="attr">name</span>:<span class="string">"p1"</span>,<span class="attr">age</span>:<span class="number">36</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"p2"</span>,<span class="attr">age</span>:<span class="number">31</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"p3"</span>,<span class="attr">age</span>:<span class="number">39</span>}]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">comparePlayer</span>(<span class="params">player1,player2</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> player1.age  - player2.age</span><br><span class="line">}</span><br><span class="line">players.sort(comparePlayer)</span><br><span class="line"><span class="built_in">console</span>.log(players)</span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组的合并与剪切"><a href="#数组的合并与剪切" class="headerlink" title="数组的合并与剪切"></a>数组的合并与剪切</h4><ul>
<li>concat可以合并一项，也可以合并一个数组。所以可以用它向数组末尾添加项。</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [<span class="string">"curry"</span>,<span class="string">"james"</span>,<span class="string">"kobe"</span>];</span><br><span class="line"><span class="keyword">let</span> players2 = players.concat(<span class="string">"jordan"</span>,[<span class="string">"拉里伯德"</span>,<span class="string">"魔术师"</span>])</span><br><span class="line"><span class="built_in">console</span>.log(players2)  <span class="comment">//["curry", "james", "kobe", "jordan", "拉里伯德", "魔术师"]</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>slice可以剪切一个数组的元素成为一个新的数组</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组下标从0开始</span></span><br><span class="line"><span class="comment">//从第2项开始剪切到最后，["james", "kobe", "jordan", "拉里伯德", "魔术师"]</span></span><br><span class="line"><span class="built_in">console</span>.log(players2.slice(<span class="number">1</span>))   </span><br><span class="line"><span class="comment">//从第2项开始剪切到第5项，不包含第5项。  ["james", "kobe", "jordan"]</span></span><br><span class="line"><span class="built_in">console</span>.log(players2.slice(<span class="number">1</span>,<span class="number">4</span>))</span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组元素删除、插入、替换"><a href="#数组元素删除、插入、替换" class="headerlink" title="数组元素删除、插入、替换"></a>数组元素删除、插入、替换</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [<span class="string">"curry"</span>,<span class="string">"james"</span>,<span class="string">"kobe"</span>];</span><br><span class="line"><span class="comment">//从下标为0的项开始，删除一项。</span></span><br><span class="line">players.splice(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(players)  <span class="comment">// ["james", "kobe"]</span></span><br><span class="line"><span class="comment">//从下标为1的项开始，删除0项，插入2项。相当于插入操作</span></span><br><span class="line">players.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="string">"jordan"</span>,<span class="string">"魔术师"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(players) <span class="comment">//["james", "jordan", "魔术师", "kobe"]</span></span><br><span class="line"><span class="comment">//从下标为1的项开始，删除1项，插入1项。相当于替换操作</span></span><br><span class="line">players.splice(<span class="number">1</span>,<span class="number">1</span>,<span class="string">"杜兰特"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(players) <span class="comment">//["james", "杜兰特", "魔术师", "kobe"]</span></span><br></pre></td></tr></tbody></table></figure>

<p>这个方法相对复杂，如何记忆这个方法？不要分别去记忆删除、插入、替换的实现。<br>记3个参数，从下标为(参数一)开始，删除(参数二)个元素，插入(参数三)个项。参数三可以是多个，并且是可选。<br>通过对三个参数的组合来实现删除、插入、替换操作。</p>
<h4 id="重点-for-in与for-of遍历数组"><a href="#重点-for-in与for-of遍历数组" class="headerlink" title="(重点)for-in与for-of遍历数组"></a>(重点)for-in与for-of遍历数组</h4><p>遍历数组</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [<span class="string">"curry"</span>,<span class="string">"james"</span>,<span class="string">"kobe"</span>];</span><br><span class="line"><span class="keyword">for</span>(index <span class="keyword">in</span> players){</span><br><span class="line">    <span class="built_in">console</span>.log(index + <span class="string">":"</span> + players[index])</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(player <span class="keyword">in</span> players){</span><br><span class="line">    <span class="built_in">console</span>.log(player)</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(player <span class="keyword">of</span> players){</span><br><span class="line">    <span class="built_in">console</span>.log(player) <span class="comment">//curry</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img alt="img" data-src="https://img.kancloud.cn/8d/64/8d6491bd0cb9390ba95fa1d7a8ae4f66_276x133.png" class="lazyload"></p>
<ul>
<li>当实际业务使用不到数组下标时，使用for-of遍历更方便</li>
</ul>
<h4 id="重点-数组迭代判定"><a href="#重点-数组迭代判定" class="headerlink" title="(重点)数组迭代判定"></a>(重点)数组迭代判定</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [{<span class="attr">name</span>:<span class="string">"james"</span>,<span class="attr">age</span>:<span class="number">36</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"curry"</span>,<span class="attr">age</span>:<span class="number">31</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"kobe"</span>,<span class="attr">age</span>:<span class="number">39</span>}]</span><br><span class="line"><span class="comment">//every方法，判断是否数组每一个对象的年龄都大于30</span></span><br><span class="line"><span class="keyword">let</span> isGt30 = players.every(<span class="function"><span class="keyword">function</span>(<span class="params">value,index,arr</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> value.age > <span class="number">30</span></span><br><span class="line">})</span><br><span class="line"><span class="built_in">console</span>.log(isGt30)  <span class="comment">//true</span></span><br><span class="line"><span class="comment">//some方法，判断是否数组中有至少一个对象的名字包含cu</span></span><br><span class="line"><span class="keyword">let</span> isContainCu = players.some(<span class="function"><span class="keyword">function</span>(<span class="params">value,index,arr</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> value.name.includes(<span class="string">"cu"</span>)</span><br><span class="line">})</span><br><span class="line"><span class="built_in">console</span>.log(isContainCu)  <span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<p>迭代方法的三个参数：<strong>当前的值，当前的数组成员下标，原数组</strong><br>只要理解了英文单词的语义，这两个方法不难记忆</p>
<ul>
<li>every，每一个</li>
<li>some，存在一些</li>
</ul>
<blockquote>
<p>想一想，如果你不知道every和some方法，你该怎么做？麻不麻烦？</p>
</blockquote>
<h4 id="重点-数组成员的迭代处理"><a href="#重点-数组成员的迭代处理" class="headerlink" title="(重点)数组成员的迭代处理"></a>(重点)数组成员的迭代处理</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> players = [{<span class="attr">name</span>:<span class="string">"james"</span>,<span class="attr">age</span>:<span class="number">36</span>,<span class="attr">champions</span>:<span class="number">3</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"curry"</span>,<span class="attr">age</span>:<span class="number">31</span>,<span class="attr">champions</span>:<span class="number">3</span>},</span><br><span class="line">               {<span class="attr">name</span>:<span class="string">"kobe"</span>,<span class="attr">age</span>:<span class="number">39</span>,<span class="attr">champions</span>:<span class="number">5</span>}]</span><br><span class="line"></span><br><span class="line">players.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value,index,array</span>)</span>{</span><br><span class="line">    <span class="comment">//这个方法没有返回值，可以在这里执行一些操作，比如渲染一个table</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<tr><span class="subst">${value.name}</span></tr>`</span>)  <span class="comment">//这里使用了ES6语法，避免字符串拼接</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>结果：<br><img alt="img" data-src="https://img.kancloud.cn/a6/c1/a6c17ac26f264442a3004d9f7607fddc_324x70.png" class="lazyload"></p>
<h4 id="重点-数组的过滤与归并计算"><a href="#重点-数组的过滤与归并计算" class="headerlink" title="(重点)数组的过滤与归并计算"></a>(重点)数组的过滤与归并计算</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//过滤数组中所有年龄大于30的球员，返回值也是一个数组</span></span><br><span class="line"><span class="keyword">let</span> ageGt30Players = players.filter(<span class="function"><span class="keyword">function</span>(<span class="params">value,index,array</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> value.age > <span class="number">30</span></span><br><span class="line">})</span><br><span class="line"><span class="built_in">console</span>.log(ageGt30Players) <span class="comment">//数组所有球员年龄都大于30，所以ageGt30Players = players</span></span><br><span class="line"><span class="comment">//将数组的中所有人的年龄都减小5岁</span></span><br><span class="line"><span class="keyword">let</span> young5Plauers = ageGt30Players.map(<span class="function"><span class="keyword">function</span>(<span class="params">value,index,array</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> {<span class="attr">name</span>:value.name, <span class="attr">age</span>:value.age - <span class="number">5</span>, <span class="attr">champions</span>:value.champions}</span><br><span class="line">})</span><br><span class="line"><span class="built_in">console</span>.log(young5Plauers)  <span class="comment">//球员对象的年龄变为31,26,34</span></span><br><span class="line"><span class="comment">//计算数组中球员，总冠军的数量</span></span><br><span class="line"><span class="keyword">let</span> championsNums = young5Plauers.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev,value,index,array</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> prev + value.champions</span><br><span class="line">},<span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(championsNums)  <span class="comment">//11,三位球员的总冠军数量</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>filter方法用于过滤数组的成员，满足条件的成员组成一个新的数组返回</li>
<li>map方法用于对数组成员处理，返回一个处理完成之后的数组</li>
<li>reduce用于对数组元素进行归并计算，和其他数组迭代方法不同，它的function有四个参数。其中第一个参数比较特殊，表示上一次迭代计算的结果。</li>
<li>reduce除了迭代函数function，还有一个参数为初始值，第一次计算时候prev=初始值。我们这里设置为0</li>
</ul>
<p>上面那一堆，使用ES6语法，可以简写为：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> championsNums = players.filter(<span class="function"><span class="params">value</span> =></span> value.age > <span class="number">30</span>)</span><br><span class="line">                         .map(<span class="function"><span class="params">value</span> =></span> {<span class="keyword">return</span> {<span class="attr">name</span>:value.name, <span class="attr">age</span>:value.age - <span class="number">5</span>, <span class="attr">champions</span>:value.champions}})</span><br><span class="line">                         .reduce(<span class="function">(<span class="params">prev,value</span>) =></span> prev + value.champions ,<span class="number">0</span> )</span><br></pre></td></tr></tbody></table></figure>

<h3 id="5、解构表达式"><a href="#5、解构表达式" class="headerlink" title="5、解构表达式"></a>5、解构表达式</h3><blockquote>
<p>数组解构</p>
</blockquote>
<p>比如有一个数组：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>我想获取其中的值，只能通过角标。ES6可以这样：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [x,y,z] = arr;<span class="comment">// x，y，z将与arr中的每个位置对应来取值</span></span><br><span class="line"><span class="comment">// 然后打印</span></span><br><span class="line"><span class="built_in">console</span>.log(x,y,z);</span><br></pre></td></tr></tbody></table></figure>

<p>结果：</p>
<blockquote>
<p>对象解构</p>
</blockquote>
<p>例如有个person对象：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">    name:<span class="string">"jack"</span>,</span><br><span class="line">    age:<span class="number">21</span>,</span><br><span class="line">    language: [<span class="string">'java'</span>,<span class="string">'js'</span>,<span class="string">'css'</span>]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>我们可以这么做：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构表达式获取值</span></span><br><span class="line"><span class="keyword">const</span> {name,age,language} = person;</span><br><span class="line"><span class="comment">// 打印</span></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="built_in">console</span>.log(language);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="6、函数优化"><a href="#6、函数优化" class="headerlink" title="6、函数优化"></a>6、函数优化</h3><blockquote>
<p>函数参数默认值</p>
</blockquote>
<p>在ES6以前，我们无法给一个函数参数设置默认值，只能采用变通写法：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a , b</span>) </span>{</span><br><span class="line">    <span class="comment">// 判断b是否为空，为空就给默认值1</span></span><br><span class="line">    b = b || <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 传一个参数</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>现在可以这么写：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a , b = <span class="number">1</span></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 传一个参数</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>));</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>箭头函数</p>
</blockquote>
<p>ES6中定义函数的简写方式：</p>
<p>一个参数时：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> print = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(obj);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 简写为：</span></span><br><span class="line"><span class="keyword">var</span> print2 = <span class="function"><span class="params">obj</span> =></span> <span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></tbody></table></figure>

<p>多个参数：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个参数的情况：</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span> (<span class="params">a , b</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 简写为：</span></span><br><span class="line"><span class="keyword">var</span> sum2 = <span class="function">(<span class="params">a,b</span>) =></span> a+b;</span><br></pre></td></tr></tbody></table></figure>

<p>代码不止一行，可以用<code>{}</code>括起来</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum3 = <span class="function">(<span class="params">a,b</span>) =></span> {</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>对象的函数属性简写</p>
</blockquote>
<p>比如一个Person对象，里面有eat方法：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = {</span><br><span class="line">    name: <span class="string">"jack"</span>,</span><br><span class="line">    <span class="comment">// 以前：</span></span><br><span class="line">    eat: <span class="function"><span class="keyword">function</span> (<span class="params">food</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">"在吃"</span> + food);</span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// 箭头函数版：</span></span><br><span class="line">    eat2: <span class="function"><span class="params">food</span> =></span> <span class="built_in">console</span>.log(person.name + <span class="string">"在吃"</span> + food),<span class="comment">// 这里拿不到this</span></span><br><span class="line">    <span class="comment">// 简写版：</span></span><br><span class="line">    eat3(food){</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">"在吃"</span> + food);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>箭头函数结合解构表达式</p>
</blockquote>
<p>比如有一个函数：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">    name:<span class="string">"jack"</span>,</span><br><span class="line">    age:<span class="number">21</span>,</span><br><span class="line">    language: [<span class="string">'java'</span>,<span class="string">'js'</span>,<span class="string">'css'</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">person</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello,"</span> + person.name)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>如果用箭头函数和解构表达式</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hi = <span class="function">(<span class="params">{name}</span>) =></span>  <span class="built_in">console</span>.log(<span class="string">"hello,"</span> + name);</span><br></pre></td></tr></tbody></table></figure>



<h3 id="7-promise"><a href="#7-promise" class="headerlink" title="7.promise"></a>7.promise</h3><h4 id="异步操作与同步操作"><a href="#异步操作与同步操作" class="headerlink" title="异步操作与同步操作"></a>异步操作与同步操作</h4><p>用白话举个例子：</p>
<ul>
<li>同步：好比你给别人打电话，电话里面沟通立刻就有响应，这就是同步的。</li>
<li>异步：你给别人发短信，别人不一定马上回复。而是一段时间之后才有回复。</li>
</ul>
<p>此时，对于发起异步操作的人，有三种选择：</p>
<ul>
<li>第一种是一直看着短信，等待回复。你什么也做不了，就是等着。这就是阻塞IO</li>
<li>第二种是每隔一段时间去查看一下对方是否回复。这是非阻塞IO</li>
<li>第三种就是你给对方留言中加上了回调：“当你看到短信时给我打一电话”，这样你就去干别的事了。第三种是我们在js异步操作中常用的方法。</li>
</ul>
<h4 id="传统异步操作中的问题"><a href="#传统异步操作中的问题" class="headerlink" title="传统异步操作中的问题"></a>传统异步操作中的问题</h4><p>Promise是用于处理异步操作及异步操作回调的结构优化语法，在ES6中被提出。在ES6之前，当我们在异步回调函数结果中获取数据，再次发起异步操作。周而复始，可能会出现一种被称为回调地狱的代码结构，如下：</p>
<p><img alt="img" data-src="https://img.kancloud.cn/64/f3/64f3b2fb80a6975bacfe013ed688084a_640x344.png" class="lazyload"></p>
<ul>
<li>这种结构首先缩进很难排版及阅读，一不小心就将代码写错了地方</li>
<li>另外这种结构，无法将异步操作与异步操作回调结果解耦。在一些结构化比较好的js程序中，可能发起操作的是A模块，做异步结果处理的是B模块。</li>
</ul>
<p>Promise就是为了解决上述问题，应运而生的。</p>
<h4 id="Promise的三种状态"><a href="#Promise的三种状态" class="headerlink" title="Promise的三种状态"></a>Promise的三种状态</h4><p>学习本小节之前，大家一定要有一个概念，js函数的参数不仅可以是字符串、数字等基本类型，也可以是函数。<br><img alt="img" data-src="https://img.kancloud.cn/95/71/9571b2bb2107fa11e37f4dba34c83678_640x378.png" class="lazyload"></p>
<ul>
<li>Pending (等待中)：Promise 的初始状态，异步操作进行中。如：网络请求正在处理，读写文件正在进行。</li>
<li>Fulfilled (已实现)：异步操作已经实行成功。</li>
<li>Rejected (已拒绝)：异步操作过程执行失败。</li>
</ul>
<h4 id="Promise基础语法"><a href="#Promise基础语法" class="headerlink" title="Promise基础语法"></a>Promise基础语法</h4><p><img alt="img" data-src="https://img.kancloud.cn/e6/58/e6586e88694cdaf57c63f214cd48b384_617x268.png" class="lazyload"></p>
<ul>
<li>Promise异步操作主要由两部分组成，一是New Promise发起异步操作，而是then函数处理异步操作结果</li>
<li>Promise异步函数有两个参数，这两个参数也是函数，resolve和reject。</li>
<li>当resolve函数被调用，表示异步操作成功。then函数的第一个函数参数方法被回调。可以传递一个对象作为成功处理的结果参数，如图中的data={}</li>
<li>当reject函数被调用，表示异步操作失败。then函数的第二个函数参数方法被回调。同样可以传递一个对象作为失败处理的结果参数，如图中的err= Error对象。</li>
</ul>
<p>大家可以看到这样做的好处就是：异步操作与异步操作结果回调就被解耦了。我们完全可以把new Promise放到A模块，并将p变量导出；B模块导入变量p，使用p.then进行回调结果处理。</p>
<h4 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h4><p>当我们的异步操作中还有异步操作，为了避免回调地狱的代码格式，我们应该使用链式调用。或者异步操作中有同步操作，也可以使用链式调用。所谓链式调用必须保证：函数的调用者与函数的返回值都是同一个类型，才能链式调用。比如then函数的调用者和返回值都是Promise类型 。</p>
<ul>
<li>then函数如果只有一个参数，那就是异步操作成功的回调函数。then函数的第二个函数参数是可选的。</li>
<li>链式调用的catch函数的参数，是异步操作失败的回调函数。</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>{</span><br><span class="line">    <span class="comment">// 异步操作</span></span><br><span class="line">    <span class="keyword">if</span>(异步操作成功) {</span><br><span class="line">        resolve(<span class="string">'Success'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        reject(<span class="string">'Failure'</span>);</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{  <span class="comment">//处理异步操作成功数据</span></span><br><span class="line">    <span class="comment">//处理异步操作的结果</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =></span>{</span><br><span class="line">        resolve( data + <span class="string">"xxx1"</span>)</span><br><span class="line">    })</span><br><span class="line">}).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{  <span class="comment">//处理异步操作成功数据</span></span><br><span class="line">    <span class="comment">//处理异步操作的结果</span></span><br><span class="line">    <span class="comment">//上面的那一段then函数的简化写法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve( data + <span class="string">"xxx2"</span>)</span><br><span class="line">}).then(<span class="function"><span class="params">data</span> =></span> {   <span class="comment">//处理异步成功操作数据。简化为箭头函数</span></span><br><span class="line">    <span class="comment">//处理异步操作的结果</span></span><br><span class="line">    <span class="comment">//上面的那一段then函数更简化的写法</span></span><br><span class="line">    <span class="keyword">return</span> data + <span class="string">"xxx3"</span></span><br><span class="line">}).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">/* error */</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>上文中，关于Promise对象的构建，并调用resolve方法，写了三种形式。这三种形式效果是一样的。后两种方式进行了不同程度的简写。简单起见，成功回调函数的参数data就写成了字符串，字符串也是一种对象。<br>同样，下面三种构造Promise对象，并调用reject方法的三种形式，也是一样的效果。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve.reject</span>) =></span>{</span><br><span class="line">   reject({<span class="attr">errorMsg</span>:<span class="string">""</span>})</span><br><span class="line">})</span><br><span class="line"><span class="comment">//方式二：</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Promise</span>.reject({<span class="attr">errorMsg</span>:<span class="string">""</span>})</span><br><span class="line"><span class="comment">//方式三：</span></span><br><span class="line"><span class="keyword">throw</span> {<span class="attr">errorMsg</span>:<span class="string">""</span>}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="Promise的all方法"><a href="#Promise的all方法" class="headerlink" title="Promise的all方法"></a>Promise的all方法</h4><p>我们可能会遇到这样的需求，A、B、C三个异步操作，必须这三个操作都完成了才能进行下一步操作。在没有promise的时候，我们通常定义三个变量aflag、bflag、cflag初始值为false，当A执行完成时置aflag=true。以此类推。判断三个flag都为true，才执行下一步的操作。</p>
<p>有了Promise的all方法，这一切就变得顺理成章，我们再也不用判断flag了。代码如下：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =></span> {</span><br><span class="line">        resolve({<span class="attr">msg</span>:<span class="string">"1"</span>})</span><br><span class="line">}),p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =></span> {</span><br><span class="line">        resolve({<span class="attr">msg</span>:<span class="string">"2"</span>})</span><br><span class="line">}),p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =></span> {</span><br><span class="line">        resolve({<span class="attr">msg</span>:<span class="string">"3"</span>})</span><br><span class="line">});</span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(results);  <span class="comment">// [{msg:"1"},{msg:"2"},{msg:"3"}]</span></span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>当p1、p2、p3三个异步操作都完成的时候，才执行then中的函数。then函数的参数results是一个数组，results[0]是p1异步执行成功的结果数据。以此类推。</p>
<h3 id="8-set和map（了解）"><a href="#8-set和map（了解）" class="headerlink" title="8.set和map（了解）"></a>8.set和map（了解）</h3><p>ES6提供了Set和Map的数据结构。</p>
<p>Set，本质与数组类似。不同在于Set中只能保存不同元素，如果元素相同会被忽略。跟java很像吧。</p>
<p>构造函数：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set构造函数可以接收一个数组或空</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set();</span><br><span class="line"><span class="keyword">set</span>.add(1);// [1]</span><br><span class="line">// 接收数组</span><br><span class="line">let set2 = new Set([2,3,4,5,5]);// 得到[2,3,4,5]</span><br></pre></td></tr></tbody></table></figure>

<p>普通方法：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">set.add(1);// 添加</span><br><span class="line">set.clear();// 清空</span><br><span class="line">set.delete(2);// 删除指定元素</span><br><span class="line">set.has(2); // 判断是否存在</span><br><span class="line">set.keys();// 返回所有key</span><br><span class="line">set.values();// 返回所有值</span><br><span class="line">set.entries();// 返回键值对集合</span><br><span class="line">// 因为set没有键值对，所有其keys、values、entries方法返回值一样的。</span><br><span class="line">set.size; // 元素个数。是属性，不是方法。</span><br></pre></td></tr></tbody></table></figure>

<p>map，本质是与Object类似的结构。不同在于，Object强制规定key只能是字符串。而Map结构的key可以是任意对象。即：</p>
<ul>
<li>object是 <string,object>集合</li>
<li>map是<object,object>集合</li>
</ul>
<p>构造函数：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// map接收一个数组，数组中的元素是键值对数组</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">'key1'</span>,<span class="string">'value1'</span>],</span><br><span class="line">    [<span class="string">'key2'</span>,<span class="string">'value2'</span>],</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 或者接收一个set</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">set</span> = new Set([</span><br><span class="line">    ['key1','value1'],</span><br><span class="line">    ['key2','value2'],</span><br><span class="line">])</span><br><span class="line">const map2 = new Map(<span class="keyword">set</span>)</span><br><span class="line">// 或者其它map</span><br><span class="line">const map3 = new Map(map);</span><br></pre></td></tr></tbody></table></figure>

<p>方法：</p>
<p> ![1526114799767](J:/BaiduNetdiskDownload/spring cloud视频教程项目实战es6 vue spring boot 2 idea 2018/乐优商城《项目笔记》/乐优商城《项目笔记》/day04笔记/assets/1526114799767.png)</p>
<h3 id="9-模块化"><a href="#9-模块化" class="headerlink" title="9.模块化"></a>9.模块化</h3><h4 id="什么是模块化"><a href="#什么是模块化" class="headerlink" title="什么是模块化"></a>什么是模块化</h4><p>模块化就是把代码进行拆分，方便重复利用。类似java中的导包：要使用一个包，必须先导包。</p>
<p>而JS中没有包的概念，换来的是 模块。</p>
<p>模块功能主要由两个命令构成：<code>export</code>和<code>import</code>。</p>
<ul>
<li><code>export</code>命令用于规定模块的对外接口，</li>
<li><code>import</code>命令用于导入其他模块提供的功能。</li>
</ul>
<h4 id="export"><a href="#export" class="headerlink" title="export"></a>export</h4><p>比如我定义一个js文件:hello.js，里面有一个对象：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = {</span><br><span class="line">    sum(a,b){</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>我可以使用export将这个对象导出：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = {</span><br><span class="line">    sum(a,b){</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> util;</span><br></pre></td></tr></tbody></table></figure>

<p>当然，也可以简写为：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> util = {</span><br><span class="line">    sum(a,b){</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>export</code>不仅可以导出对象，一切JS变量都可以导出。比如：基本类型变量、函数、数组、对象。</p>
<p>当要导出多个值时，还可以简写。比如我有一个文件：user.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"jack"</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">21</span></span><br><span class="line"><span class="keyword">export</span> {name,age}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>省略名称</p>
</blockquote>
<p>上面的导出代码中，都明确指定了导出的变量名，这样其它人在导入使用时就必须准确写出变量名，否则就会出错。</p>
<p>因此js提供了<code>default</code>关键字，可以对导出的变量名进行省略</p>
<p>例如：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无需声明对象的名字</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    sum(a,b){</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>这样，当使用者导入时，可以任意起名字</p>
<h4 id="4-3-8-3-import"><a href="#4-3-8-3-import" class="headerlink" title="4.3.8.3.import"></a>4.3.8.3.import</h4><p>使用<code>export</code>命令定义了模块的对外接口以后，其他 JS 文件就可以通过<code>import</code>命令加载这个模块。</p>
<p>例如我要使用上面导出的util：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入util</span></span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">'hello.js'</span></span><br><span class="line"><span class="comment">// 调用util中的属性</span></span><br><span class="line">util.sum(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>要批量导入前面导出的name和age： </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {name, age} <span class="keyword">from</span> <span class="string">'user.js'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name + <span class="string">" , 今年"</span>+ age +<span class="string">"岁了"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>但是上面的代码暂时无法测试，因为浏览器目前还不支持ES6 的导入和导出功能。除非借助于工具，把ES6 的语法进行编译降级到ES5，比如<code>Babel-cli</code>工具</p>
<p> 我们暂时不做测试，大家了解即可。</p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Nigtunt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://nigtunt.github.io/2020/05/24/ES6%E8%AF%AD%E6%B3%95/">https://nigtunt.github.io/2020/05/24/ES6%E8%AF%AD%E6%B3%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://nigtunt.github.io">Nigtunt</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript    </a><a class="post-meta__tags" href="/tags/ES6/">ES6    </a></div><div class="post_share"><div class="social-share" data-image="http://a.hiphotos.baidu.com/baike/pic/item/d009b3de9c82d15834a6cbdd890a19d8bc3e42b2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/05/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%B8%89-%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><img class="prev_cover lazyload" data-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1590343840833&amp;di=727b56e1fefe2bc0813838f46ece79a4&amp;imgtype=0&amp;src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201410%2F16%2F20141016093336_LuZvA.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>设计模式(三)行为型模式</span></div></a></div><div class="next-post pull_right"><a href="/2020/05/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%8C-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><img class="next_cover lazyload" data-src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2174653899,3494771742&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>设计模式(二)结构型模式</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/05/25/async和await的使用/" title="async和await的使用"><img class="relatedPosts_cover lazyload"data-src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1727875035,1058014352&fm=26&gp=0.jpg"><div class="relatedPosts_title">async和await的使用</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" style="background-image: url(http://a.hiphotos.baidu.com/baike/pic/item/d009b3de9c82d15834a6cbdd890a19d8bc3e42b2.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Nigtunt</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://jerryc.me/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/baidupush.js"> </script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>